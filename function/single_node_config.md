### 单节点服务发布配置

#### 创建服务发布配置
基于服务详情页是根据服务所在环境进行展示的，所以创建发布配置也是针对当前所在环境。

##### 新建发布配置-构建发布
构建发布指的是发布时拉取源代码进行编译构建、打镜像、发布。

- ###### 1、基本信息  
    - 填写发布配置的名称和描述信息，确认发布配置的所属环境和发布类型。

- ###### 2、编译构建（代码编译、打镜像）
    - 确认代码库地址：创建服务时设定
    - 可设置发布时可选代码分支：如生产环境发布，仅允许发布master分支
    - 代码编译命令：可以是maven、npm等代码编译命令，如不需要编译可不填
    - 镜像名：固定格式（服务所属项目CODE/服务CODE）
    - Dockerfile 文件路径：Dockerfile 文件在代码仓库中的相对路径

- ###### 3、容器运行（容器运行配置）
    - 服务启动命令：填写服务的启动命令，如不需要可空
    - 容器计算资源：单个容器实例所分配的CPU、内存资源和发布节点
    - 服务端口：可配置服务端口和宿主机映射端口，例如配置服务端口为8080，宿主机映射端口为6000，对应docker命令为-p 6000:8080
    - LB分配端口：当容器端口提供集群外访问时，会自动分配一个LB端口。

- ###### 4、额外设置
    - 环境变量：设置容器的环境变量，点击新增环境变量，输入环境变量名称和环境变量值
    
    - 持久化挂载卷：容器重启或者漂移时，本地文件将会丢失，可以使用挂载卷以持久化保存本地文件


##### 新建发布配置-镜像发布
相对于构建发布，镜像发布过程更加简单，可以选择已有镜像直接发布（无需拉取源代码编译构建、打镜像）。

创建过程同构建发布（不需要编译构建步骤）。


##### 新建发布配置-导入配置
选择当前服务已有的发布配置进行修改后保存为新的发布配置，避免重复填写相同的表单项。
此处仅能导入资源类型为单节点的发布配置，不能导入非单节点的。
<br/>
创建好发布配置，git仓库代码准备好就可以进行[服务发布](../function/deploy.md)操作了。


